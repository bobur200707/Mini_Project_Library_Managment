<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Library Management System</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
    body { background-color: #f8f9fa; }
    .navbar { margin-bottom: 20px; }
    .card { margin: 10px; }
    .container { max-width: 1200px; }
</style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">Library LMS</a>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav me-auto">
                <li class="nav-item"><a class="nav-link" href="#" onclick="showSection('books')">Books</a></li>
                <li class="nav-item"><a class="nav-link" href="#" onclick="showSection('members')">Members</a></li>
                <li class="nav-item"><a class="nav-link" href="#" onclick="showSection('transactions')">Issue/Return</a></li>
            </ul>
        </div>
    </div>
</nav>

<div class="container">

<!-- Books Section -->
<div id="books">
    <h2>Books List</h2>
    <div class="mb-3">
        <input type="text" id="bookSearch" class="form-control" placeholder="Search by book name" onkeyup="searchBooks()">
    </div>
    <div class="mb-3">
        <input type="text" id="bookName" placeholder="Book Name" class="form-control">
        <input type="text" id="bookAuthor" placeholder="Author" class="form-control mt-1">
        <input type="text" id="bookGenre" placeholder="Genre" class="form-control mt-1">
        <input type="number" id="bookQuantity" placeholder="Available Copies" class="form-control mt-1">
        <button class="btn btn-success mt-2" onclick="addBook()">Add Book</button>
    </div>
    <div class="row" id="bookList"></div>
</div>

<!-- Members Section -->
<div id="members" style="display:none;">
    <h2>Members List</h2>
    <div class="mb-3">
        <input type="text" id="memberName" placeholder="Member Name" class="form-control mt-1">
        <input type="text" id="memberEmail" placeholder="Email" class="form-control mt-1">
        <input type="text" id="memberPhone" placeholder="Phone" class="form-control mt-1">
        <button class="btn btn-success mt-2" onclick="addMember()">Add Member</button>
    </div>
    <ul id="memberList" class="list-group mt-3"></ul>
</div>

<!-- Issue/Return Section -->
<div id="transactions" style="display:none;">
    <h2>Issue / Return Books</h2>
    <div class="mb-3">
        <select id="selectBook" class="form-select mt-1"></select>
        <select id="selectMember" class="form-select mt-1"></select>
        <button class="btn btn-primary mt-2" onclick="issueBook()">Issue Book</button>
    </div>
    <h4 class="mt-4">Issued Books</h4>
    <ul id="transactionList" class="list-group mt-2"></ul>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
let books = [
    {name: "The Great Gatsby", author: "F. Scott Fitzgerald", genre: "Fiction", quantity: 5},
    {name: "To Kill a Mockingbird", author: "Harper Lee", genre: "Fiction", quantity: 3},
    {name: "1984", author: "George Orwell", genre: "Dystopian", quantity: 4},
    {name: "The Catcher in the Rye", author: "J.D. Salinger", genre: "Fiction", quantity: 2}
];

let members = [
    {name: "Alice Johnson", email: "alice@example.com", phone: "123-456-7890"},
    {name: "Bob Smith", email: "bob@example.com", phone: "234-567-8901"},
    {name: "Charlie Brown", email: "charlie@example.com", phone: "345-678-9012"}
];

let transactions = [];

function showSection(section) {
    document.getElementById('books').style.display = 'none';
    document.getElementById('members').style.display = 'none';
    document.getElementById('transactions').style.display = 'none';
    document.getElementById(section).style.display = 'block';
    updateSelects();
    renderBooks();
    renderMembers();
    renderTransactions();
}

function addBook() {
    const name = document.getElementById('bookName').value;
    const author = document.getElementById('bookAuthor').value;
    const genre = document.getElementById('bookGenre').value;
    const quantity = document.getElementById('bookQuantity').value;
    if(name && author && genre && quantity){
        books.push({name, author, genre, quantity: parseInt(quantity)});
        document.getElementById('bookName').value='';
        document.getElementById('bookAuthor').value='';
        document.getElementById('bookGenre').value='';
        document.getElementById('bookQuantity').value='';
        renderBooks();
        updateSelects();
    }
}

function renderBooks(){
    const list = document.getElementById('bookList');
    list.innerHTML = '';
    books.forEach((book, index)=>{
        list.innerHTML += `
        <div class="col-md-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">${book.name}</h5>
                    <p class="card-text">Author: ${book.author}</p>
                    <p class="card-text">Genre: ${book.genre}</p>
                    <p class="card-text">Available: ${book.quantity}</p>
                    <button class="btn btn-danger" onclick="removeBook(${index})">Delete</button>
                </div>
            </div>
        </div>`;
    });
}

function removeBook(index){
    books.splice(index,1);
    renderBooks();
    updateSelects();
}

function addMember(){
    const name = document.getElementById('memberName').value;
    const email = document.getElementById('memberEmail').value;
    const phone = document.getElementById('memberPhone').value;
    if(name && email && phone){
        members.push({name,email,phone});
        document.getElementById('memberName').value='';
        document.getElementById('memberEmail').value='';
        document.getElementById('memberPhone').value='';
        renderMembers();
        updateSelects();
    }
}

function renderMembers(){
    const list = document.getElementById('memberList');
    list.innerHTML = '';
    members.forEach((member,index)=>{
        list.innerHTML += `<li class="list-group-item d-flex justify-content-between align-items-center">
            ${member.name} (${member.email})
            <button class="btn btn-danger btn-sm" onclick="removeMember(${index})">Delete</button>
        </li>`;
    });
}

function removeMember(index){
    members.splice(index,1);
    renderMembers();
    updateSelects();
}

function updateSelects(){
    const bookSelect = document.getElementById('selectBook');
    const memberSelect = document.getElementById('selectMember');
    bookSelect.innerHTML = '';
    memberSelect.innerHTML = '';
    books.forEach((book,index)=>{
        if(book.quantity>0){
            bookSelect.innerHTML += `<option value="${index}">${book.name}</option>`;
        }
    });
    members.forEach((member,index)=>{
        memberSelect.innerHTML += `<option value="${index}">${member.name}</option>`;
    });
}

function issueBook(){
    const bookIndex = document.getElementById('selectBook').value;
    const memberIndex = document.getElementById('selectMember').value;
    if(bookIndex!=='' && memberIndex!==''){
        books[bookIndex].quantity--;
        transactions.push({book:books[bookIndex].name, member:members[memberIndex].name, date:new Date().toLocaleDateString()});
        renderBooks();
        renderTransactions();
        updateSelects();
    }
}

function renderTransactions(){
    const list = document.getElementById('transactionList');
    list.innerHTML='';
    transactions.forEach((t,index)=>{
        list.innerHTML += `<li class="list-group-item d-flex justify-content-between align-items-center">
            ${t.book} issued to ${t.member} (${t.date})
            <button class="btn btn-success btn-sm" onclick="returnBook(${index})">Return</button>
        </li>`;
    });
}

function returnBook(index){
    const bookName = transactions[index].book;
    const book = books.find(b=>b.name===bookName);
    if(book) book.quantity++;
    transactions.splice(index,1);
    renderBooks();
    renderTransactions();
    updateSelects();
}

function searchBooks(){
    const query = document.getElementById('bookSearch').value.toLowerCase();
    const filtered = books.filter(book=>book.name.toLowerCase().includes(query));
    const list = document.getElementById('bookList');
    list.innerHTML='';
    filtered.forEach((book,index)=>{
        list.innerHTML += `
        <div class="col-md-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">${book.name}</h5>
                    <p class="card-text">Author: ${book.author}</p>
                    <p class="card-text">Genre: ${book.genre}</p>
                    <p class="card-text">Available: ${book.quantity}</p>
                    <button class="btn btn-danger" onclick="removeBook(${index})">Delete</button>
                </div>
            </div>
        </div>`;
    });
}

// Initialize with books section visible
showSection('books');
</script>
</body>
</html>
